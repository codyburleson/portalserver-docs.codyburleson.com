<?xml version="1.0" encoding="UTF-8"?>
<!--
 =================================================================
 * Licensed Materials - Property of IBM
 * (c) Copyright IBM Corp. 2003, 2010.  All rights reserved.
 *
 * US Government Users Restricted Rights - Use, duplication or
 * disclosure restricted by GSA ADP Schedule Contract with IBM
 * Corp.
 *
 * DISCLAIMER OF WARRANTIES.  The following [enclosed] code is
 * sample code created by IBM Corporation.  This sample code is
 * not part of any standard or IBM product and is provided to you
 * solely for the purpose of assisting you in the development of
 * your applications.  The code is provided "AS IS", without
 * warranty of any kind.  IBM shall not be liable for any damages
 * arising out of your use of the sample code, even if they have
 * been advised of the possibility of such damages.
 *
 =================================================================
-->

<request
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="PortalConfig_8.0.0.xsd"
    type="update">
<!--
   Sample that clones an existing (concrete) portlet application.
   This sample requires the 'DeployPortlet.xml' sample to be executed successfully. 
   The 'Welcome Portlet' deployed in that sample will be cloned and and the 
   new application will be activated along with its portlet.
   To prove everything worked, a new page will be created containing the
   cloned portlet. The page is linked to the 'My Portal' menu in the navigation.

   The Welcome Portlet does not have any portlet settings, but normally you
   would clone a portlet because you want to have a new version with
   different settings.
 -->
    <portal action="locate">



        <!-- The web-app tag is taken from an export of the original portlet. 
             The url and access-control tags were removed. -->
        <web-app action="update" active="true" uid="com.ibm.wps.cp.portlet.tagcloud.webmod">

		<servlet action="locate" name="Tag Cloud" objectid="theReferencedServlet" referenceid="portletidviewer"/>
		<!-- The name/ uid must be constructed from the original name/ uid appended with ".$cloned." 
                 and appended with some id that makes the string unique. Optional you can set a unique name. -->
            <portlet-app action="update" active="true" name="Xml Sample Portlet app.$cloned.1" uid="com.ibm.wps.cp.portlet.tagcloud.$cloned.1" 
                         uniquename="com.ibm.wps.portletapp.xmlsample.$cloned.1">
                <!-- The name must be constructed from the original name appended with ".$cloned." 
                     and appended with some id that makes the string unique. Optional you can set a unique name. -->
                <portlet action="update" active="true" defaultlocale="en" name="Tag Cloud.$cloned.1" objectid="theClonedPortlet"
                         servletref="theReferencedServlet" uniquename="com.ibm.wps.portlet.xmlsample.$cloned.1">
                    <localedata locale="en">
                        <title>WebSphere Portal Sample Portlet Clone</title>
                        <description>Sample portlet clone</description>
                        <keywords>${portlet.keywords}</keywords>
                    </localedata>
                    <parameter name="url" type="string" update="set">/WEB-INF/jsp/wps.jsp</parameter>
                </portlet>
            </portlet-app>
        </web-app>

        <!-- parent element under which the new page is inserted -->
        <content-node action="locate" objectid="parentPage" uniquename="ibm.portal.Home"/>
	
	
         <content-node action="update" active="true" allportletsallowed="true" content-parentref="parentPage" create-type="explicit" domain="rel" ordinal="last" type="staticpage" uniquename="ibm.portal.ssa.SamplePage.3">
            <localedata locale="en">
              <title>Sample Portlet (Cloned)</title>
            </localedata>
            <!-- The content of static page in binary format 
                 attribute markup can be set to one of portal server supported markups
                 attribute display-option can be set to "inline" or "iframe" or "ajax".-->
            <pagecontents markup="html" display-option="inline">
                <content>UEsDBBQACAAIALKbTDcAAAAAAAAAAAAAAAALAAAAaW5kZXgxLmh0bWxtUE1rwzAMvQf6H0TuTeh1
ZL7stFsghZ5VW2sEjmxir1n//YTdbDAGOoj3IelpmAmdOTRD5uzJTLhETzBlzGxhxBsNfWVU0u/a
a3APc9AmmvPMCbQQUvVE9QB9lTkdFLpAMyYIQhDDquPyu6heLMGFvA0LwVjxDurcHX7Khz6WhY7v
YD2m9No+maMNkpGF1hYEF/oh3nb81Jr/nRuLC9sf26WAp1bzPPwvfHT0wcKZg7xsMXWx2y88B81w
neJMa02BvizsdWO5uTZNiTV6wkRw58QZPvVtNz2xhFNdfWvzDVBLBwjDeEQR4AAAAJMBAABQSwEC
FAAUAAgACACym0w3w3hEEeAAAACTAQAACwAAAAAAAAAAAAAAAAAAAAAAaW5kZXgxLmh0bWxQSwUG
AAAAAAEAAQA5AAAAGQEAAAAA</content>
            </pagecontents>
            <parameter name="com.ibm.portal.bookmarkable" type="string" update="set"><![CDATA[Yes]]></parameter>
            <parameter name="resourceaggregation.profile" type="string" update="set"><![CDATA[profiles/profile_dojo_lightweight.json]]></parameter>
            <parameter name="com.ibm.portal.friendly.name" type="string" update="set"><![CDATA[staticpage2]]></parameter>
            <!-- this parameter must match the name of static page -->
            <parameter name="com.ibm.portal.static.page.file.name.html" type="string" update="set"><![CDATA[index1.html]]></parameter>
            <access-control externalized="false" owner="uid=wpsadmin,o=defaultwimfilebasedrealm" private="false"/>
            <component action="update" active="true" domain="rel" ordinal="100" orientation="V" type="container">
                <component action="update" active="true" domain="rel" ordinal="100" orientation="V" type="container"/>
                <component action="update" active="true" domain="rel" ordinal="100" orientation="H" type="container">
                    <!-- this parameter must match the portlet-container name in the static page -->
                    <parameter name="com.ibm.portal.layoutnode.localname" type="string" update="set"><![CDATA[portletContainer1]]></parameter>
                    <component action="update" active="true" domain="rel" ordinal="100" type="control">
                        <!-- this parameter must match the portlet-window name in the static page -->
                        <parameter name="com.ibm.portal.layoutnode.localname" type="string" update="set"><![CDATA[portletWindow1]]></parameter>
                        <portletinstance action="update" domain="rel" portletref="theClonedPortlet" />
                    </component>
                </component>
            </component>
        </content-node>

    </portal>
</request>

