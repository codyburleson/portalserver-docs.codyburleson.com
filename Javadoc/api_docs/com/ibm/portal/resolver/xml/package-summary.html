<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0) on Sat Dec 12 10:33:09 EST 2020 -->
<TITLE>
com.ibm.portal.resolver.xml (IBM WebSphere Portal Version 8.5.0.0 API Docs)
</TITLE>

<META NAME="date" CONTENT="2020-12-12">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="com.ibm.portal.resolver.xml (IBM WebSphere Portal Version 8.5.0.0 API Docs)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../serialized-form.html"><FONT CLASS="NavBarFont1"><B>Serialized</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../com/ibm/portal/resolver/webdav/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../../com/ibm/portal/resolver/xml/exception/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?com/ibm/portal/resolver/xml/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package com.ibm.portal.resolver.xml
</H2>
<div>
                        <div>
                                <div>
                                        <a name="top"/>
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/ibm/portal/resolver/xml/Constants.html" title="interface in com.ibm.portal.resolver.xml">Constants</A></B></TD>
<TD>Convenience constants for XML processing.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/ibm/portal/resolver/xml/DefaultContentHandler.html" title="interface in com.ibm.portal.resolver.xml">DefaultContentHandler</A></B></TD>
<TD>General convenience interface that allows to format common data fields and
 write them as characters onto a content handler</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/ibm/portal/resolver/xml/ResettableContentHandler.html" title="interface in com.ibm.portal.resolver.xml">ResettableContentHandler</A></B></TD>
<TD>Extension of <CODE>ContentHandler</CODE> that allows to build content handler
 chains.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/ibm/portal/resolver/xml/ResolverContentHandler.html" title="interface in com.ibm.portal.resolver.xml">ResolverContentHandler</A></B></TD>
<TD>Content handler filter that dispatches to a target content handler and that
 can use the context of the events floating over it to perform context sensitive
 URL resolution.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/ibm/portal/resolver/xml/ResolverXMLFilter.html" title="interface in com.ibm.portal.resolver.xml">ResolverXMLFilter</A></B></TD>
<TD>XML filter that produces XML elements and that
 can use the context of the events floating over it to perform context sensitive
 URL resolution.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/ibm/portal/resolver/xml/URIResolver.html" title="interface in com.ibm.portal.resolver.xml">URIResolver</A></B></TD>
<TD>Resolves (relative) URI references into absolute URIs.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../../com/ibm/portal/resolver/xml/URLResolver.html" title="interface in com.ibm.portal.resolver.xml">URLResolver</A></B></TD>
<TD>Resolves (relative) URL references into absolute URLs.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package com.ibm.portal.resolver.xml Description
</H2>

<P>
<div>
                        <div>
                                <div>
                                        <a name="top"/>
                                        <h1>XML API</h1>
                                        <div>
                                                <h3>From Portalpedia</h3>
                                                <div/>
                                                <p>This article describes a set of <a href="/wiki/index.php/JAXP" title="JAXP">JAXP</a> based APIs that are meant to facilitate the
generation of XML generation or parsing.</p>
                                                <table border="0">
                                                        <tr>
                                                                <td align="center" rowspan="1" colspan="1">
                                                                        <b>Table of contents</b>
                                                                </td>
                                                        </tr>
                                                        <tr>
                                                                <td rowspan="1" colspan="1">
                                                                        <div>
                                                                                <a href="#Design_Principles">1 Design Principles</a>
                                                                                <br clear="none"/>
                                                                        </div>
                                                                        <div>
                                                                                <p>
                                                                                        <a href="#Content_handler_chains">1.1 Content handler chains</a>
                                                                                        <br clear="none"/>
                                                                                </p>
                                                                        </div>
                                                                        <div>
                                                                                <a href="#Categories_of_functions">2 Categories
                of functions</a>
                                                                                <br clear="none"/>
                                                                        </div>
                                                                        <div>
                                                                                <p>
                                                                                        <a href="#Convenience_classes">2.1 Convenience classes</a>
                                                                                        <br clear="none"/>
                                                                                        <a href="#Handling_of_xml:base">2.2 Handling of xml:base</a>
                                                                                        <br clear="none"/>
                                                                                </p>
                                                                        </div>
                                                                        <div>
                                                                                <a href="#Access_to_the_service">3 Access to the
                service</a>
                                                                                <br clear="none"/>
                                                                        </div>
                                                                        <div>
                                                                                <p>
                                                                                        <a href="#Example_how_to_access_an_implementation">3.1 Example how
                to access an implementation</a>
                                                                                        <br clear="none"/>
                                                                                        <a href="#Example_how_to_access_the_registry">3.2 Example how to
                access the registry</a>
                                                                                        <br clear="none"/>
                                                                                </p>
                                                                        </div>
                                                                        <div>
                                                                                <a href="#Examples">4 Examples</a>
                                                                                <br clear="none"/>
                                                                        </div>
                                                                        <div>
                                                                                <p>
                                                                                        <a href="#Handle_links_in_an_XML_document_with_xml:base_tags">4.1
                Handle links in an XML document with xml:base tags</a>
                                                                                        <br clear="none"/>
                                                                                </p>
                                                                                <div>
                                                                                        <p>
                                                                                                <a href="#Reader_chain">4.1.1 Reader chain</a>
                                                                                                <br clear="none"/>
                                                                                                <a href="#Handler">4.1.2 Handler</a>
                                                                                                <br clear="none"/>
                                                                                                <a href="#Result">4.1.3 Result</a>
                                                                                                <br clear="none"/>
                                                                                        </p>
                                                                                </div>
                                                                                <p>
                                                                                        <a href="#Interoperability_with_the_ATOM_API">4.2 Interoperability
                with the ATOM_API</a>
                                                                                        <br clear="none"/>
                                                                                </p>
                                                                        </div>
                                                                </td>
                                                        </tr>
                                                </table>
                                                <a name="Design_Principles"/>
                                                <h1>Design Principles</h1>
                                                <p>This API should help in the execution of commonly required tasks
based on the <a href="/wiki/index.php/JAXP" title="JAXP">JAXP</a> APIs.
In particular the streaming concepts of the JAXP APIs are considered and
preserved in this helper API.</p>
                                                <a name="Content_handler_chains"/>
                                                <h2>Content handler chains</h2>
                                                <p>One of the basic design principles of <a href="/wiki/index.php/JAXP" title="JAXP">JAXP</a> is the possibility to construct chains of
handlers of SAX events. The idea is that each layer in this chain is
responsible for dealing with one singular aspect of the event processing
and delegates to the following elements in the chain for further
processing. Given that the layers concentrate on solving just one aspect
of the the complete processing, they are reusable more likely than
handlers that solve the complete algorithm.</p>
                                                <p>Clients of such handlers would typically construct a handler chain at
initialization time that represents the intended algorithm. This chain
would then be reused to process many different XML inputs.</p>
                                                <p>This design pattern implies that it is possible to concatenate a
chain of handlers and to associate different XML inputs at runtime. In <a href="/wiki/index.php/JAXP" title="JAXP">JAXP</a> there exist two
different modes of processing:</p>
                                                <dl>
                                                        <dt>parsing</dt>
                                                        <dd>an XML parser is represented by the <CODE>XMLReader</CODE>
        interface. A chain of parsers that filter the event during input is
        represented by <CODE>XMLFilter</CODE>,
        an extension of <CODE>XMLReader</CODE>.
        Clients can construct the parser filter chain using the constructors of
        the individual filter elements. For each differnet XML input clients
        either just specify a special <CODE>InputSource</CODE>
        object and reuse the existing filter chain. Alternatively they call <code>setParent</code>
        on the <CODE>XMLFilter</CODE>
        to associate a completely different XML parser with the chain. The
        individual chain elements are advised to route the <code>setParent</code>
        call to their outmost parent to keep the chain intact and just
        reassociate the root parser.</dd>
                                                        <dt>handling</dt>
                                                        <dd>a parser produces SAX events and throws them onto a <CODE>ContentHandler</CODE>.
        The second possibility to filter events is during this handling
        process, the <CODE>ContentHandler</CODE>
        that is attached to a <CODE>XMLReader</CODE>
        can internally also be a handler chain. Again this chain would be built
        using the constructors of the individual chain elements and each layer
        in the chain dispatches the events to its next layer, in addition to
        performing its layer specific logic. In <a href="/wiki/index.php/JAXP" title="JAXP">JAXP</a> there is however no extension to <CODE>ContentHandler</CODE>
        that allows to reassociate the target (leaf) element of this handler
        chain. This however is required to reuse a chain over multiple XML
        streams. The <A HREF="../../../../../com/ibm/portal/resolver/xml/ResettableContentHandler.html" title="interface in com.ibm.portal.resolver.xml"><CODE>ResettableContentHandler</CODE></A>
        extension closes this gap.</dd>
                                                </dl>
                                                <a name="Categories_of_functions"/>
                                                <h1>Categories of functions</h1>
                                                <a name="Convenience_classes"/>
                                                <h2>Convenience classes</h2>
                                                <p>The following classes simplify the construction of XML filter chains.
</p>
                                                <dl>
                                                        <dt><A HREF="../../../../../com/ibm/portal/resolver/xml/helper/LeafContentHandler.html" title="class in com.ibm.portal.resolver.xml.helper"><CODE>LeafContentHandler</CODE></A></dt>
                                                        <dd>represents the last element in a <A HREF="../../../../../com/ibm/portal/resolver/xml/ResettableContentHandler.html" title="interface in com.ibm.portal.resolver.xml"><CODE>ResettableContentHandler</CODE></A>
        chain, i.e. the element that is not connected to any further chain
        element. This object however keeps a resettable reference to the target
        <CODE>ContentHandler</CODE>.

        </dd>
                                                        <dt><A HREF="../../../../../com/ibm/portal/resolver/xml/helper/ResettableContentHandlerAdapter.html" title="class in com.ibm.portal.resolver.xml.helper"><CODE>ResettableContentHandlerAdapter</CODE></A></dt>
                                                        <dd>can be used as a convenient base class for custom implementations
        of <A HREF="../../../../../com/ibm/portal/resolver/xml/ResettableContentHandler.html" title="interface in com.ibm.portal.resolver.xml"><CODE>ResettableContentHandler</CODE></A></dd>
                                                </dl>
                                                <a name="Handling_of_xml:base"/>
                                                <h2>Handling of <code>xml:base</code></h2>
                                                <p>In many documents, and in particular in ATOM feeds, the use of the <code>xml:base</code>
tag is explicitly permitted. This implies that all URL references need
to be interpreted relative to the closest base tag. See <a href="http://www.w3.org/TR/xmlbase/" rel="nofollow">http://www.w3.org/TR/xmlbase/</a>
for more details.</p>
                                                <p>The XML helper API supplies classes that handle the resolution of
nested base tags automatically and allow clients to resolve (relative)
URLs in the scope of the <i>current</i> base tag. The management of the
base tags is done transparently to the client application by an
introspection of the XML stream. This introspection can be done at XML
generation time via the <A HREF="../../../../../com/ibm/portal/resolver/xml/ResolverXMLFilter.html" title="interface in com.ibm.portal.resolver.xml"><CODE>ResolverXMLFilter</CODE></A>
interface or at consumption time via the <A HREF="../../../../../com/ibm/portal/resolver/xml/ResolverContentHandler.html" title="interface in com.ibm.portal.resolver.xml"><CODE>ResolverContentHandler</CODE></A>
interface. Both interfaces leave the XML stream completely unmodified.
Clients can make use of the <A HREF="../../../../../com/ibm/portal/resolver/xml/URLResolver.html" title="interface in com.ibm.portal.resolver.xml"><CODE>URLResolver</CODE></A>
interface to resolve relative references.</p>
                                                <a name="Access_to_the_service"/>
                                                <h1>Access to the service</h1>
                                                <p>The XML factory defines the Eclipse extension point <code>XMLFactory.EXTENSION_POINT_ID</code>.
Clients can either look for any available extension of this extension
point or directly look for the extension <code>XMLFactory.DEFAULT_EXTENSION_ID</code>.
</p>
                                                <a name="Example_how_to_access_an_implementation"/>
                                                <h2>Example how to access an implementation</h2>
                                                <pre>
final IExtensionPoint extPoint = extReg
        .getExtensionPoint(XMLFactory.EXTENSION_POINT_ID);
final IExtension ext = extPoint
        .getExtension(XMLFactory.DEFAULT_EXTENSION_ID);
final IConfigurationElement[] cfgElems = ext.getConfigurationElements();
final XMLFactory xmlFct = (XMLFactory) cfgElems[0]
        .createExecutableExtension(XMLFactory.ATTR_CLASS);
</pre>
                                                <a name="Example_how_to_access_the_registry"/>
                                                <h2>Example how to access the registry</h2>
                                                <pre>
InitialContext initialcontext = new InitialContext();
IExtensionRegistry extReg = (IExtensionRegistry) initialcontext
                .lookup("services/extensionregistry/global");
</pre>
                                                <a name="Examples"/>
                                                <h1>Examples</h1>
                                                <p>This section provides some examples on how to use the XML helper
APIs. The following XML data is used as an example input.</p>
                                                <pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;atom:feed xmlns:atom="http://www.w3.org/2005/Atom"
        xmlns:xhtml="http://www.w3.org/1999/xhtml"&gt;

        &lt;atom:title&gt;dive into mark&lt;/atom:title&gt;
        &lt;atom:subtitle type="html"&gt;
                A &lt;em&gt;lot&lt;/em&gt; of effort went into making this
                effortless
        &lt;/atom:subtitle&gt;

        &lt;atom:updated&gt;2006-08-08T20:48:48.00Z&lt;/atom:updated&gt;
        &lt;atom:id&gt;tag:example.org,2003:3&lt;/atom:id&gt;
        &lt;atom:link href="http://example.org" type="text/html" hreflang="en" /&gt;

        &lt;atom:link href="feed.atom" rel="self"
                type="application/atom+xml" /&gt;
        &lt;atom:rights&gt;&gt;

        &lt;atom:generator uri="http://www.example.com/" version="1.0"&gt;
                Example Toolkit
        &lt;/atom:generator&gt;
        &lt;atom:entry xml:base="http://entry.org/entry/"&gt;
                &lt;atom:title&gt;Atom draft-07 snapshot&lt;/atom:title&gt;

                &lt;atom:link href="../2005/04/02/atom"
                        type="text/html" /&gt;
                &lt;atom:link href="ph34r_my_podcast.mp3"
                        rel="enclosure" type="audio/mpeg" length="1337" /&gt;

                &lt;atom:id&gt;tag:example.org,2003:3.2397&lt;/atom:id&gt;
                &lt;atom:updated&gt;2006-08-08T20:48:48.00Z&lt;/atom:updated&gt;
                &lt;atom:published&gt;2006-08-08T20:48:48.00Z&lt;/atom:published&gt;
                &lt;atom:author&gt;

                        &lt;atom:name&gt;Mark Pilgrim&lt;/atom:name&gt;
                        &lt;atom:uri&gt;http://example.org/&lt;/atom:uri&gt;
                        &lt;atom:email&gt;f8dy@example.com&lt;/atom:email&gt;
                &lt;/atom:author&gt;

                &lt;atom:contributor&gt;
                        &lt;atom:name&gt;Sam Ruby&lt;/atom:name&gt;
                &lt;/atom:contributor&gt;
                &lt;atom:contributor&gt;
                        &lt;atom:name&gt;Joe Gregorio&lt;/atom:name&gt;

                &lt;/atom:contributor&gt;
                &lt;atom:content xml:lang="en" xml:base="http://diveintomark.org/"
                        type="xhtml"&gt;
                        &lt;div xmlns="http://www.w3.org/1999/xhtml"&gt;

                                &lt;p&gt;
                                        &lt;i&gt;[Update: The Atom draft is finished.]&lt;/i&gt;
                                &lt;/p&gt;
                        &lt;/div&gt;
                &lt;/atom:content&gt;

        &lt;/atom:entry&gt;
&lt;/atom:feed&gt;
</pre>
                                                <a name="Handle_links_in_an_XML_document_with_xml:base_tags"/>
                                                <h2>Handle links in an XML document with <code>xml:base</code> tags</h2>
                                                <p>In order to construct a parser that automatically takes the <code>xml:base</code>
tags into account, we need to produce two artifacts</p>
                                                <dl>
                                                        <dt>parser chain</dt>
                                                        <dd>we construct an <CODE>XMLReader</CODE>
        object that pipes SAX events from a parent reader via the <A HREF="../../../../../com/ibm/portal/resolver/xml/ResolverXMLFilter.html" title="interface in com.ibm.portal.resolver.xml"><CODE>ResolverXMLFilter</CODE></A>
        layer onto a <CODE>ContentHandler</CODE>.
        The complete chain exposes only the <CODE>XMLReader</CODE>
        interface, so it looks (and behaves) exactly like a normal XML parser
        to a client.</dd>
                                                        <dt>handler</dt>
                                                        <dd>like in normal XML parsing we implement the <CODE>ContentHandler</CODE>
        interface to receive the SAX events from a parser. In order to
        correctly interpret relative references however this handler keeps a
        reference to the <A HREF="../../../../../com/ibm/portal/resolver/xml/URLResolver.html" title="interface in com.ibm.portal.resolver.xml"><CODE>URLResolver</CODE></A>
        interface that is part of the reader chain. Because this resolver
        intercepts the XML data stream it can keep track of the <i>current</i>
        base URL and allows the handler to correctly resolve all references.</dd>
                                                </dl>
                                                <a name="Reader_chain"/>
                                                <h3>Reader chain</h3>
                                                <pre>
// base URL to start with
final URL baseURL = new URL("http://www.ibm.com");
                
// step1: setup the XML generation chain                
// the original parser
final XMLReader rdr = XMLReaderFactory.createXMLReader();
// the filter layer that handles xml:base
final ResolverXMLFilter xmlBaseRdr = XML_FCT.createXMLBaseFilter(rdr);
xmlBaseRdr.setBaseURL(baseURL);
// the content handler that wants to resolve xml:base links
final ContentHandler handler = new XMLBaseHandler(xmlBaseRdr);
// construct the chain
xmlBaseRdr.setContentHandler(handler);
                
// this is the actual object to use as the parser, we just need the XMLReader interface
final XMLReader parser = xmlBaseRdr;

// step2: parse actual sources, the same chain can be used for many sources
// the actual XML data source
final InputSource src = new InputSource(getClass().getResourceAsStream("sampleBaseFeed.xml"));
parser.parse(src);
</pre>
                                                <a name="Handler"/>
                                                <h3>Handler</h3>
                                                <pre>
package com.ibm.wps.resolver.test;

import java.io.IOException;
import java.net.URL;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import com.ibm.portal.resolver.xml.URLResolver;

public class XMLBaseHandler extends DefaultHandler {

        /**
         * the resolver that can convert between relative and absolute URLs
         */
        protected final URLResolver urlResolver;
        
        public XMLBaseHandler(final URLResolver aUrlResolver) {
                urlResolver = aUrlResolver;
        }

        public void startElement(final String uri, final String localName, final String qName, final Attributes attributes) throws SAXException {
                // try to resolve all hrefs
                final String href = attributes.getValue("href");
                if (href != null) {
                        // resolve this
                        try {
                                final URL url = urlResolver.resolve(href);
                                System.out.println(url);
                        } catch (IOException ex) {
                                throw new SAXException(ex);
                        }
                }
        }
        
}
</pre>
                                                <a name="Result"/>
                                                <h3>Result</h3>
                                                <p>The example generates the following output. Notice that the <code>xml:base</code>
URLs have been respected and resolved correctly.</p>
                                                <pre>

http://example.org
http://www.ibm.com/feed.atom
http://entry.org/2005/04/02/atom
http://entry.org/entry/ph34r_my_podcast.mp3
</pre>
                                                <a name="Interoperability_with_the_ATOM_API"/>
                                                <h2>Interoperability with the <a href="/wiki/index.php/ATOM_API" title="ATOM API">ATOM_API</a></h2>
                                                <p>Interpretation of <code>xml:base</code> resolution can also be done
easily with the <a href="/wiki/index.php/ATOM_API" title="ATOM API">ATOM_API</a>.
The same design patterns as in the previous example apply, only that the
handler receives method calls instead of SAX events.</p>
                                                <pre>
// base URL to start with
final URL baseURL = new URL("http://www.ibm.com");
                
// step1: setup the XML generation chain                
// the original parser
final XMLReader rdr = XMLReaderFactory.createXMLReader();
// the filter layer that handles xml:base
final ResolverXMLFilter xmlBaseRdr = XML_FCT.createXMLBaseFilter(rdr);
xmlBaseRdr.setBaseURL(baseURL);
// the layer that decodes the ATOM stream
final AtomXMLReader atomRdr = ATOM_FCT.createAtomXMLReader(xmlBaseRdr);
// the content handler that interprets the ATOM events
final AtomContentHandler atomHandler = new AtomBaseHandler(xmlBaseRdr);
// construct the chain
atomRdr.setAtomContentHandler(atomHandler);

// step2: parse actual sources, the same chain can be used for many sources
// the actual ATOM data source
final InputSource src = new InputSource(getClass().getResourceAsStream("sampleBaseFeed.xml"));
atomRdr.parse(src);

</pre>
                                                <p>And the handler side that receives semantically meaningful method
callbacks</p>
                                                <pre>
package com.ibm.wps.resolver.test;

import java.io.IOException;
import java.net.URL;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;

import com.ibm.portal.resolver.atom.helper.EmptyAtomContentHandler;
import com.ibm.portal.resolver.xml.URLResolver;

public class AtomBaseHandler extends EmptyAtomContentHandler{
        
        /**
         * the resolver that can convert between relative and absolute URLs
         */
        protected final URLResolver urlResolver;
        
        public AtomBaseHandler(final URLResolver aUrlResolver) {
                urlResolver = aUrlResolver;
        }

        /* (non-Javadoc)
         * @see com.ibm.portal.resolver.atom.AtomContentHandler#startLink(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, org.xml.sax.Attributes)
         */
        public void startLink(String rHref, String oRel, String oType, String oHrefLang, String oTitle, String oLength, Attributes attrs) throws SAXException {
                try {
                        // resolve the rHref
                        final URL url = urlResolver.resolve(rHref);
                        // display the resolved URL
                        System.out.println(url);                        
                } catch (IOException ex) {
                        // convert to a SAX exception
                        throw new SAXException(ex);
                }
        }
}
</pre>
                                                <div/>
                                        </div>
                                </div>
                        </div>
                        <div/>
                </div>
<P>

<P>
<DL>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../serialized-form.html"><FONT CLASS="NavBarFont1"><B>Serialized</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../com/ibm/portal/resolver/webdav/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../../../com/ibm/portal/resolver/xml/exception/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?com/ibm/portal/resolver/xml/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
